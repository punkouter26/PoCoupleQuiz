sequenceDiagram
    participant Browser as Browser
    participant Diag as /diag Page
    participant API as API /api/health
    participant HC as Health Check Service
    participant TS as Azure Table Storage Check
    participant AI as Azure OpenAI Check

    Browser->>Diag: Navigate to /diag
    activate Diag
    
    Diag->>Diag: OnInitializedAsync()
    Diag->>API: GET /api/health
    activate API
    
    API->>HC: Execute Health Checks
    activate HC
    
    par Parallel Health Checks
        HC->>HC: Check "self" (API liveness)
        HC-->>HC: Healthy
    and
        HC->>TS: AzureTableStorageHealthCheck.CheckHealthAsync()
        activate TS
        TS->>TS: Try connect to Table Storage
        alt Connection Successful
            TS-->>HC: Healthy
        else Connection Failed
            TS-->>HC: Unhealthy + Exception
        end
        deactivate TS
    and
        HC->>AI: AzureOpenAIHealthCheck.CheckHealthAsync()
        activate AI
        AI->>AI: Try connect to OpenAI endpoint
        alt Connection Successful
            AI-->>HC: Healthy
        else Connection Failed
            AI-->>HC: Unhealthy + Exception
        end
        deactivate AI
    end
    
    HC-->>API: HealthReport { status, checks[], totalDuration }
    deactivate HC
    
    API->>API: Serialize to JSON
    API-->>Diag: { status: "Healthy", checks: [...], totalDuration: 123.45 }
    deactivate API
    
    Diag->>Diag: Parse health response
    Diag->>Diag: Update UI state
    Diag-->>Browser: Render health cards with status
    deactivate Diag

    Note over Browser,AI: User Interaction

    Browser->>Diag: Click "Refresh Status" button
    activate Diag
    Diag->>Diag: RefreshHealthStatus()
    Diag->>API: GET /api/health
    Note right of API: Same flow as above
    API-->>Diag: Updated health status
    Diag-->>Browser: Re-render with new data
    deactivate Diag
