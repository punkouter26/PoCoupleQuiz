@inherits LayoutComponentBase
@inject IJSRuntime JS

<div class="app-container" id="app-container">
    <div class="sidebar" id="sidebar">
        <div class="sidebar-brand">
            <h2>🎯 PoCoupleQuiz</h2>
        </div>
        <nav class="sidebar-nav">
            <NavLink class="nav-item" href="" Match="NavLinkMatch.All">
                <i class="nav-icon">🏠</i>
                <span class="nav-text">Home</span>
            </NavLink>
            <NavLink class="nav-item" href="leaderboard">
                <i class="nav-icon">🏆</i>
                <span class="nav-text">Leaderboard</span>
            </NavLink>
        </nav>
        <div class="sidebar-footer">
            <div class="app-version">
                <small>v1.0.0</small>
            </div>
        </div>
    </div>

    <div class="main-content">
        <header class="top-header">
            <div class="header-content">
                <button class="mobile-menu-toggle" onclick="toggleSidebar()" style="display: none;">
                    ☰
                </button>
                <h1 class="page-title">Couple Quiz Game</h1>
                <div class="header-actions">
                    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">
                        <span class="theme-icon">🌙</span>
                    </button>
                    <span class="status-indicator">🟢 Online</span>
                </div>
            </div>
        </header>
        
        <main class="content-area">
            @Body
        </main>
    </div>
</div>

<script>
    window.toggleSidebar = function() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('open');
    };
    
    // Dark mode toggle
    window.toggleTheme = function() {
        const container = document.getElementById('app-container');
        const isDark = container.classList.toggle('dark-mode');
        const icon = document.querySelector('.theme-icon');
        
        // Update icon
        icon.textContent = isDark ? '☀️' : '🌙';
        
        // Save preference
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
    };
    
    // Initialize theme on load
    window.addEventListener('DOMContentLoaded', function() {
        const container = document.getElementById('app-container');
        const icon = document.querySelector('.theme-icon');
        
        // Check saved preference or system preference
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const shouldBeDark = savedTheme === 'dark' || (!savedTheme && prefersDark);
        
        if (shouldBeDark) {
            container.classList.add('dark-mode');
            icon.textContent = '☀️';
        }
    });
    
    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function(event) {
        const sidebar = document.getElementById('sidebar');
        const toggle = document.querySelector('.mobile-menu-toggle');
        
        if (window.innerWidth <= 768 && 
            !sidebar.contains(event.target) && 
            !toggle.contains(event.target) && 
            sidebar.classList.contains('open')) {
            sidebar.classList.remove('open');
        }
    });
</script>
