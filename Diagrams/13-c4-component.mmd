graph TB
    subgraph "C4 Component Diagram - Web API"
        subgraph "Controllers"
            GameController[GameController<br/>Game management endpoints<br/>POST /api/game/start<br/>GET /api/game/status]
            QuestionController[QuestionController<br/>Question retrieval<br/>GET /api/questions<br/>GET /api/questions/random]
            DiagController[DiagController<br/>Health checks<br/>GET /api/diag/health<br/>GET /api/diag/status]
        end
        
        subgraph "Services"
            GameService[GameService<br/>Business logic<br/>Game state management<br/>Score calculations]
            QuestionService[QuestionService<br/>Question management<br/>Category filtering<br/>Randomization]
            DiagnosticService[DiagnosticService<br/>System health checks<br/>Connection monitoring]
        end
        
        subgraph "Repositories"
            GameRepository[GameRepository<br/>Game data persistence<br/>Azure Table Storage<br/>CRUD operations]
            QuestionRepository[QuestionRepository<br/>Question data access<br/>Category queries<br/>Random selection]
        end
        
        subgraph "Infrastructure"
            TableClient[Azure Table Client<br/>Storage SDK<br/>Connection management]
            Logger[Logging Service<br/>Serilog integration<br/>Application Insights]
            Cache[Caching Service<br/>In-memory cache<br/>Performance optimization]
        end
    end
    
    GameController --> GameService
    QuestionController --> QuestionService
    DiagController --> DiagnosticService
    
    GameService --> GameRepository
    QuestionService --> QuestionRepository
    
    GameRepository --> TableClient
    QuestionRepository --> TableClient
    
    GameService --> Logger
    QuestionService --> Logger
    DiagnosticService --> Logger
    
    GameService --> Cache
    QuestionService --> Cache
